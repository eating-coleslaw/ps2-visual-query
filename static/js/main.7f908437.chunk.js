(this["webpackJsonpps2-visual-query"]=this["webpackJsonpps2-visual-query"]||[]).push([[0],{194:function(e,t,n){},314:function(e,t,n){},316:function(e,t,n){},322:function(e,t,n){},341:function(e,t){},343:function(e,t){},352:function(e,t){},354:function(e,t){},379:function(e,t){},381:function(e,t){},382:function(e,t){},387:function(e,t){},389:function(e,t){},395:function(e,t){},397:function(e,t){},416:function(e,t){},428:function(e,t){},431:function(e,t){},457:function(e,t){},551:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(22),c=n.n(i),o=(n(314),n(13)),s=n.n(o),l=n(39),u=n(16),d=n(6),j=n(23),b=n(9),f=n(593),p=n(295),m=n(621),h=n(620),O=n(622),g=n(623),x=n(604),v=n(554),y=n(601),C=n(598),w=n(630),S=n(624),k=(n(316),n(136)),I=n(76),N=n.n(I),_=n(628),L=n(133),F=n.n(L),E=n(92),T=n.n(E),A=n(1),q=Object(f.a)((function(e){return{button:{margin:e.spacing(1)}}}));var R=function(e){var t=e.serviceId,n=e.onServiceKeyChange,r=e.onDeleteStoredKey,i=q(),c=Object(a.useState)(t),o=Object(b.a)(c,2),s=o[0],l=o[1];return Object(A.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),n(s)},children:[Object(A.jsx)(_.a,{id:"service-key",label:"Service Key",margin:"dense",variant:"outlined",required:!0,name:"service-key",onChange:function(e){return l(e.target.value)},placeholder:"example",value:s,helperText:"Omit the leading 's:'"}),Object(A.jsx)(y.a,{type:"submit",variant:"contained",color:"primary",size:"large",className:i.button,startIcon:Object(A.jsx)(F.a,{}),children:"Save"}),Object(A.jsx)(y.a,{type:"button",variant:"outlined",color:"primary",size:"large",className:i.button,startIcon:Object(A.jsx)(T.a,{}),onClick:function(){l("example"),r()},children:"Delete"})]})},D=n(626),B={Languages:["De","En","Es","Fr","It"],Operators:[{display:"=",name:"equals",title:"Equals",value:"="},{display:"\u2260",name:"notEquals",title:"Not Equals",value:"=!"},{display:"<",name:"isLessThan",title:"Is Less Than",value:"=<"},{display:"\u2264",name:"isLessThanOrEquals",title:"Is Less Than Or Equals",value:"=["},{display:">",name:"isGreaterThan",title:"Is Greater Than",value:"=>"},{display:"\u2265",name:"isGreaterThanOrEquals",title:"Is Greater Than Or Equals",value:"=]"},{display:"Starts With",name:"startsWith",title:"Starts With",value:"=^"},{display:"Contains",name:"contains",title:"Contains",value:"=*"}],Collections:["character","character_name","characters_achievement","characters_currency","characters_directive","characters_directive_objective","characters_directive_tier","characters_directive_tree","characters_skill","characters_stat","characters_stat_by_faction","characters_stat_history","characters_weapon_stat","characters_weapon_stat_by_faction","world_stat_history","characters_item","ability","ability_type","achievement","armor_facing","armor_info","currency","directive","directive_tier","directive_tree","directive_tree_category","effect","effect_type","empire_scores","experience","experience_rank","facility_link","facility_type","faction","fire_group","fire_group_to_fire_mode","fire_mode","fire_mode_2","fire_mode_to_projectile","fire_mode_type","image","image_set","image_set_default","item","item_attachment","item_category","item_profile","item_to_weapon","item_type","loadout","map_hex","map_region","marketing_bundle","marketing_bundle_item","marketing_bundle_with_1_item","metagame_event","metagame_event_state","objective","objective_set_to_objective","objective_type","player_state","player_state_group","player_state_group_2","profile","profile_2","profile_armor_map","profile_resist_map","projectile","projectile_flight_type","region","resist_info","resist_type","resource_type","reward","reward_group_to_reward","reward_set_to_reward_group","reward_type","single_character_by_id","skill","skill_category","skill_line","skill_set","target_type","title","vehicle","vehicle_attachment","vehicle_faction","vehicle_skill_set","weapon","weapon_ammo_slot","weapon_datasheet","weapon_to_attachment","weapon_to_fire_group","zone","zone_effect","zone_effect_type","characters_world","world","outfit","outfit_member","outfit_member_extended","outfit_rank","characters_online_status","map","characters_friend","leaderboard","characters_leaderboard","characters_event_grouped","characters_event","event","world_event"]},W=Object(f.a)((function(e){return{selectControl:{minWidth:250},listbox:{margin:0,padding:"8px 0",overflow:"auto",listStyle:"none",maxHeight:"40vh",border:"1px solid #414152",boxSizing:"border-box"}}}));function z(e){var t=e.collection,n=e.onChange,r=W(),i=Object(a.useState)([]),c=Object(b.a)(i,2),o=c[0],s=c[1];function l(e){o.includes(e)&&n(e)}return Object(a.useEffect)((function(){s(B.Collections)}),[]),Object(A.jsx)(D.a,{id:"collection-selector",options:o,value:t,autoSelect:!0,required:!0,disableClearable:!0,onChange:function(e,t){return l(t)},ListboxProps:{className:"".concat(r.listbox)},renderInput:function(e){return Object(A.jsx)(_.a,Object(d.a)(Object(d.a)({},e),{},{label:"Collection",variant:"outlined",margin:"dense"}))},className:r.selectControl})}var Q=n(632),P=Object(f.a)((function(e){return{root:{width:250}}})),G=[{value:0,label:"None"},{value:10,label:10},{value:20,label:100},{value:30,label:"1k"},{value:40,label:"10k"}],J=function(e){return 0===e||e<=10?e:e<=20?10*(e-10):e<=30?100*(e-20):1e3*(e-30)};function M(e){var t,n=e.value,a=e.onChange,i=(e.label,P()),c=0===(t=n)||t<=10?t:t<=100?t/10+10:t<=1e3?t/100+20:t/1e3+30;return Object(A.jsxs)(r.a.Fragment,{children:[Object(A.jsx)(w.a,{id:"limit-input-slider-label",htmlFor:"limit-slider",children:"Limit"}),Object(A.jsx)(Q.a,{className:i.root,id:"limit-slider",value:"number"===typeof c?c:0,min:0,step:1,max:40,defaultValue:10,getAriaValueText:J,valueLabelFormat:J,valueLabelDisplay:"auto",onChange:function(e,t){a(J(t))},"aria-labelledby":"limit-input-slider-label",marks:G})]})}var V=Object(f.a)((function(e){return{selectControl:{minWidth:120,width:120}}}));function H(e){var t=e.language,n=e.onChange,r=V(),i=Object(a.useState)([]),c=Object(b.a)(i,2),o=c[0],s=c[1];return Object(a.useEffect)((function(){var e=Object(A.jsx)("option",{"aria-label":"All",value:"All",children:"All"},"All"),t=B.Languages.map((function(e){return Object(A.jsx)("option",{value:e,"aria-label":e,children:e},e)}));s([e].concat(Object(u.a)(t)))}),[]),Object(A.jsxs)(C.a,{variant:"outlined",children:[Object(A.jsx)(w.a,{htmlFor:"language-select",children:"Language"}),Object(A.jsx)(S.a,{native:!0,margin:"dense",label:"Language",className:r.selectControl,value:t,onChange:function(e){var t=e.target.value;n(t)},inputProps:{name:"language",id:"language-select"},children:o})]})}var U=n(631),K=n(605),Y=n(603),X=n(285),Z=n.n(X),$=Object(f.a)((function(e){return{button:{margin:0,padding:0},chipList:{display:"flex",justifyContent:"flex-start",flexWrap:"wrap",listStyle:"none",padding:e.spacing(.5),margin:0},chip:{margin:e.spacing(.5)}}}));function ee(e){var t=e.label,n=e.fields,i=e.onAddField,c=e.onRemoveField,o=$(),s=Object(a.useState)(""),l=Object(b.a)(s,2),u=l[0],d=l[1];function j(){return""!==u&&!n.includes(u)}var f=n.map((function(e){return Object(A.jsx)("li",{children:Object(A.jsx)(U.a,{label:e,onDelete:function(){return function(e){c(e)}(e)},className:o.chip,size:"small"})},e)}));return Object(A.jsxs)(r.a.Fragment,{children:[Object(A.jsx)(x.a,{item:!0,xs:12,sm:6,md:4,children:Object(A.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),j()&&(d(""),i(u))},children:Object(A.jsx)(_.a,{id:"add-show-field-input",label:t,margin:"dense",variant:"outlined",name:"show-field",size:"small",onChange:function(e){return d(e.target.value)},placeholder:"example",value:u,InputProps:{endAdornment:Object(A.jsx)(K.a,{position:"end",children:Object(A.jsx)(Y.a,{type:"submit",variant:"outlined",color:"primary",disabled:!j(),"aria-label":"Add to shown fields",className:o.button,children:Object(A.jsx)(Z.a,{})})})}})})}),Object(A.jsx)("ul",{className:o.chipList,children:f})]})}var te=Object(f.a)((function(e){return{fieldGridItem:{marginTop:e.spacing(1),marginBottom:4,marginLeft:e.spacing(1)},operatorGrid:{marginTop:4},button:{margin:0,padding:0}}}));function ne(e){var t=e.label,n=e.initValue,r=e.onChange,i=e.placeholder,c=void 0===i?"":i,o=e.variant,s=void 0===o?"outlined":o,l=e.ariaLabel,u=void 0===l?"":l,d=e.allowBlank,j=void 0===d||d,f=te(),p=Object(a.useState)(n),m=Object(b.a)(p,2),h=m[0],O=m[1];return Object(A.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),r(h)},children:Object(A.jsx)(_.a,{id:"".concat(t,"-field"),label:t,margin:"dense",variant:s,name:"".concat(t,"-field"),size:"small",onChange:function(e){return O(e.target.value)},value:h,placeholder:c,InputProps:{endAdornment:Object(A.jsx)(K.a,{position:"end",children:Object(A.jsx)(Y.a,{type:"submit",variant:"outlined",color:"primary",disabled:!(""===h?j&&h!==n:h!==n),"aria-label":u,className:f.button,children:Object(A.jsx)(F.a,{fontSize:"small"})})})}})})}var ae=Object(f.a)((function(e){return{fieldGridItem:{marginTop:e.spacing(1),marginBottom:4,marginLeft:e.spacing(1)},operatorGrid:{marginTop:4},button:{margin:0,padding:0}}}));function re(e){var t=e.conditionData,n=e.onDataChange,i=e.onDelete,c=ae(),o=Object(a.useState)([]),s=Object(b.a)(o,2),l=s[0],u=s[1];return Object(a.useEffect)((function(){u(B.Operators)}),[]),Object(A.jsxs)(r.a.Fragment,{children:[Object(A.jsx)(x.a,{item:!0,xs:12,md:4,children:Object(A.jsx)(ne,{label:"Field",initValue:t.field,onChange:function(e){n(t.id,"field",e)},ariaLabel:"Update the condition's field"})}),Object(A.jsx)(x.a,{item:!0,xs:3,md:3,className:c.operatorGrid,children:Object(A.jsxs)(C.a,{variant:"outlined",children:[Object(A.jsx)(w.a,{htmlFor:"operator-select",children:"Operator"}),Object(A.jsxs)(S.a,{native:!0,margin:"dense",label:"Operator",value:t.operator.name,onChange:function(e){var a=e.target.value,r=l.find((function(e){return e.name===a}));n(t.id,"operator",r)},inputProps:{name:"operator",id:"operator-select"},children:[Object(A.jsx)("option",{value:"equals",title:"Equals",children:"="},"equals"),Object(A.jsx)("option",{value:"notEquals",title:"Not Equals",children:"\u2260"},"notEquals"),Object(A.jsx)("option",{value:"isLessThan",title:"Is Less Than",children:"<"},"isLessThan"),Object(A.jsx)("option",{value:"isLessThanOrEquals",title:"Is Less Than Or Equals",children:"\u2264"},"isLessThanOrEquals"),Object(A.jsx)("option",{value:"isGreaterThan",title:"Is Greater Than",children:">"},"isGreaterThan"),Object(A.jsx)("option",{value:"isGreaterThanOrEquals",title:"Is Greater Than Or Equals",children:"\u2265"},"isGreaterThanOrEquals"),Object(A.jsx)("option",{value:"startsWith",children:"Starts With"},"startsWith"),Object(A.jsx)("option",{value:"contains",children:"Contains"},"contains")]})]})}),Object(A.jsx)(x.a,{item:!0,xs:8,md:4,children:Object(A.jsx)(ne,{label:"Value",initValue:t.value,onChange:function(e){n(t.id,"value",e)},ariaLabel:"Update the condition's value"})}),Object(A.jsx)(x.a,{item:!0,xs:1,md:1,children:Object(A.jsx)(Y.a,{"aria-label":"Delete this query condition",title:"Delete this query condition",onClick:function(){i(t.id)},children:Object(A.jsx)(T.a,{fontSize:"small"})})})]})}var ie=n(606),ce=n(112),oe=n.n(ce),se=Object(f.a)((function(e){return{headerButtonContainer:{textAlign:"right"},header1:{margin:0,fontSize:"1.4em",fontWeight:500},paper:{padding:e.spacing(2)},jsonView:{maxHeight:"600px",overflow:"auto",lineHeight:"1.1",marginTop:e.spacing(1)},textView:{maxHeight:"600px",overflow:"auto",lineHeight:"1.1",marginTop:e.spacing(1)},linearProgres:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}}));function le(e){var t=e.data,n=e.isLoading,a=se();return n?Object(A.jsxs)(v.a,{className:a.paper,children:[Object(A.jsx)("h1",{children:"Query Results"}),Object(A.jsx)(ie.a,{className:a.linearProgres})]}):Object(A.jsxs)(v.a,{className:a.paper,children:[Object(A.jsxs)(x.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(A.jsx)(x.a,{item:!0,xs:8,children:Object(A.jsx)("h1",{className:a.header1,children:"Query Results"})}),Object(A.jsx)(x.a,{item:!0,xs:4,className:a.headerButtonContainer,children:!!t&&Object(A.jsx)(y.a,{color:"primary",onClick:function(){t&&navigator.clipboard.writeText(JSON.stringify(t,null,2))},value:"Copy",title:"Copy the query results to the clipboard",startIcon:Object(A.jsx)(oe.a,{}),children:"Copy"})})]}),t?Object(A.jsx)("div",{className:a.textView,children:Object(A.jsx)("pre",{children:JSON.stringify(t,null,2)})}):null]})}var ue=n(608),de=n(286),je=n.n(de),be=n(287),fe=n.n(be),pe=n(607),me=Object(f.a)((function(e){return{header1:{margin:0,fontSize:"1.4em",fontWeight:500},paper:{padding:e.spacing(2)},urlBox:{marginTop:e.spacing(1),backgroundColor:"#1F2330",color:"#fff",fontFamily:"monospace",padding:e.spacing(1),borderRadius:4,wordWrap:"anywhere",overflow:"auto"},container:{marginTop:e.spacing(1)},gridItem:{marginRight:e.spacing(2)},button:{},runButton:{width:120},runButtonIcon:{marginLeft:-8},buttonWide:{whiteSpace:"nowrap"},syntax:{fontSize:"1rem"},questionMark:{color:"#F8C275"},ampersand:{color:"#F8C275"},queryDelimiter:{color:"#F8C275"},equals:{color:"#E752A1"},equalsModifier:{color:"#E752A1"},colon:{color:"#E752A1"},parentheses:{color:"#50DFFE"},comma:{color:"#97EE91"}}}));function he(e){var t=e.queryUrl,n=e.isLoading,a=e.onRunQuery,r=me();var i=["[","]","*","!","<",">","^"],c=[],o=unescape(t).split("?"),s=o[0];if(c.push(Object(A.jsx)("span",{children:s},s)),o.length>1){c.push(Object(A.jsx)("span",{className:r.syntax+" "+r.questionMark,children:"?"},"?"));var l=o[1].split("c:");l.forEach((function(e){0!==l.indexOf(e)&&e&&c.push(Object(A.jsx)("span",{className:r.queryDelimiter,children:"c:"},Object(pe.a)()));var t=e.split("&");t.forEach((function(e){0!==t.indexOf(e)&&c.push(Object(A.jsx)("span",{className:r.syntax+" "+r.ampersand,children:"&"},Object(pe.a)()));var n=e.split("=");n.forEach((function(e){0!==n.indexOf(e)&&c.push(Object(A.jsx)("span",{className:r.syntax+" "+r.equals,children:"="},Object(pe.a)()));var t=e.charAt(0);i.includes(t)&&(c.push(Object(A.jsx)("span",{className:r.syntax+" "+r.equalsModifier,children:t},Object(pe.a)())),e=e.substring(1));var a=e.split(":");a.forEach((function(e){0!==a.indexOf(e)&&c.push(Object(A.jsx)("span",{className:r.syntax+" "+r.colon,children:":"},Object(pe.a)()));var t=e.split("(");t.forEach((function(e){0!==t.indexOf(e)&&c.push(Object(A.jsx)("span",{className:r.syntax+" "+r.parentheses,children:"("},Object(pe.a)()));var n=e.split(")");n.forEach((function(e){0!==n.indexOf(e)&&c.push(Object(A.jsx)("span",{className:r.syntax+" "+r.parentheses,children:")"},Object(pe.a)()));var t=e.split("^");t.forEach((function(e){0!==t.indexOf(e)&&c.push(Object(A.jsx)("span",{className:r.syntax+" "+r.comma,children:"^"},Object(pe.a)()));var n=e.split(",");n.forEach((function(e){0!==n.indexOf(e)&&c.push(Object(A.jsx)("span",{className:r.syntax+" "+r.comma,children:","},Object(pe.a)())),e&&c.push(Object(A.jsx)("span",{children:e},Object(pe.a)()))}))}))}))}))}))}))}))}))}return Object(A.jsxs)(v.a,{className:r.paper,children:[Object(A.jsx)("h1",{className:r.header1,children:"Query URL"}),Object(A.jsx)("div",{className:r.urlBox,children:c}),Object(A.jsxs)(x.a,{container:!0,justifyContent:"flex-start",alignItems:"center",spacing:1,className:r.container,children:[Object(A.jsx)(x.a,{item:!0,className:r.gridItem,children:Object(A.jsx)(y.a,{color:"primary",variant:"contained",onClick:a,value:"Run",className:r.runButton,startIcon:n?null:Object(A.jsx)(je.a,{className:r.runButtonIcon}),title:"Run the query",children:n?"Loading...":"Run"})}),Object(A.jsx)(x.a,{item:!0,className:r.gridItem,children:Object(A.jsx)(y.a,{color:"primary",variant:"outlined",onClick:function(){navigator.clipboard.writeText(unescape(t))},value:"Copy",className:r.button,title:"Copy the query url to the clipboard",startIcon:Object(A.jsx)(oe.a,{}),children:"Copy"})}),Object(A.jsx)(x.a,{item:!0,className:r.gridItem,children:Object(A.jsx)(y.a,{color:"primary",variant:"outlined",onClick:function(){var e=function(e){var n=new RegExp("(/s:)[A-z0-9]+/");return t.replace(n,"/s:example/")}();navigator.clipboard.writeText(unescape(e))},value:"Copy Anonymous",className:r.buttonWide,title:"Copy the query url to the clipboard and replace your service ID with 'example'",startIcon:Object(A.jsx)(oe.a,{}),children:"Copy Anon."})}),Object(A.jsx)(x.a,{item:!0,className:r.gridItem,children:Object(A.jsx)(ue.a,{to:t,href:t,target:"_blank",rel:"noreferrer",children:Object(A.jsx)(y.a,{color:"primary",variant:"outlined",value:"Open Query",className:r.buttonWide,title:"Open the query URL in a new tab",startIcon:Object(A.jsx)(fe.a,{}),children:"Open"})})})]})]})}var Oe=n(289),ge=n.n(Oe);function xe(e){var t=e.value,n=e.label,a=e.optionA,r=e.optionB,i=e.onChange,c=e.className,o=void 0===c?null:c;return Object(A.jsxs)(C.a,{variant:"outlined",style:{minWidth:120},children:[Object(A.jsx)(w.a,{htmlFor:"binary-select",children:n}),Object(A.jsxs)(S.a,{native:!0,margin:"dense",label:n,className:o,value:t,onChange:function(e){e.preventDefault(),i(e.target.value)},inputProps:{name:"binary-select",id:"binary-select"},children:[Object(A.jsx)("option",{"aria-label":a,value:a.toLowerCase(),children:a}),Object(A.jsx)("option",{"aria-label":r,value:r.toLowerCase(),children:r})]})]})}function ve(e){var t=e.value,n=e.label,a=e.trueLabel,r=void 0===a?"Yes":a,i=e.falseLabel,c=void 0===i?"No":i,o=e.onChange,s=e.className,l=void 0===s?null:s;return Object(A.jsxs)(C.a,{variant:"outlined",style:{minWidth:120},children:[Object(A.jsx)(w.a,{htmlFor:"boolean-select",children:n}),Object(A.jsxs)(S.a,{native:!0,margin:"dense",label:n,className:l,value:t,onChange:function(e){return o(e.target.value)},inputProps:{name:"boolean-select",id:"boolean-select"},children:[Object(A.jsx)("option",{"aria-label":r,value:!0,children:r}),Object(A.jsx)("option",{"aria-label":c,value:!1,children:c})]})]})}var ye=n(66),Ce=n(288),we=n.n(Ce),Se=["headerLevel","headerText","defaultExtended","children","id"],ke=Object(f.a)((function(e){return{root:{marginBottom:e.spacing(2),marginTop:e.spacing(1)},header1:{margin:0,fontSize:"1.4em",fontWeight:500,width:"100%",marginBottom:-4},header2:{margin:0,fontSize:"1.2em",fontWeight:500,width:"100%"},header3:{margin:0,fontSize:"1.1em",fontWeight:500,width:"100%",marginBottom:2},headerContainer:{marginBottom:e.spacing(1)},headerContainerCollapsed:{paddingBottom:e.spacing(1),borderBottom:"1px solid #919cb950"},toggleContainer:{textAlign:"right",borderBottom:"1px solid #919cb950"},toggleButton:{padding:e.spacing(.5)},toggle:{transition:"transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},toggleCollapsed:{transform:"rotateZ(180deg)"},content:{width:"100%",display:"none"},contentOpen:{width:"100%"}}}));function Ie(e){var t=e.headerLevel,n=e.headerText,i=e.defaultExtended,c=e.children,o=e.id,s=(Object(ye.a)(e,Se),ke());if("number"!==typeof t||t<0||t>6)throw new Error("headerLevel must be an integer between 1 and 6");var l=r.a.createElement("h".concat(t),{className:s["header".concat(t)]},n),u=Object(a.useState)(i),d=Object(b.a)(u,2),j=d[0],f=d[1];return Object(A.jsxs)("div",{className:s.root,children:[Object(A.jsxs)(x.a,{container:!0,justifyContent:"space-between",alignItems:"center",className:s.headerContainer,children:[Object(A.jsx)(x.a,{item:!0,xs:10,className:s.headerContainerCollapsed,children:l}),Object(A.jsx)(x.a,{item:!0,xs:2,className:s.toggleContainer,children:Object(A.jsx)(Y.a,{"aria-label":function(){return j?"Collapse Section":"Expand Section"},onClick:function(){f(!j)},className:s.toggleButton,children:Object(A.jsx)(we.a,{className:"".concat(j?s.toggle:"".concat(s.toggle," ").concat(s.toggleCollapsed))})})})]}),Object(A.jsx)("div",{id:"collapsible-content-".concat(o),className:j?s.contentOpen:s.content,children:c})]})}var Ne=n(609),_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{id:Object(Ne.a)(),parentId:e,collection:"",injectAt:"",isOuterJoin:!1,isList:!1,onField:"",toField:"",filterType:"show",filterFields:[],terms:[],joins:[]}},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"equals",t=B.Operators.find((function(t){return t.name===e}));if(!t)return new Error("Operator named '".concat(e," not found"));var n=e,a=t.display,r=t.title,i=t.value;return{name:n,display:a,title:r,value:i}},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"equals",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{id:Object(Ne.a)(),field:t,value:n,operator:Le(e)}},Ee=Object(f.a)((function(e){return{paper:{padding:e.spacing(1),marginBottom:e.spacing(2),borderStyle:"solid",borderColor:"#919cb930",width:"100%"},gridRow:{marginTop:e.spacing(.5),marginBottom:e.spacing(1)},textButton:{marginTop:-4,marginBottom:e.spacing(1)},footer:{marginTop:e.spacing(0),marginBottom:e.spacing(0)},inlineSelectItem:{marginTop:4}}}));function Te(e){var t=e.joinData,n=e.depth,a=e.onDelete,r=e.onInfoChange,i=e.onAddArrayItem,c=e.onRemoveArrayItem,o=e.onChangeArrayItemWithId,s=e.onRemoveArrayItemWithId,l=Ee();function j(e,n){var a=[t.id];r(t.id,e,n,a)}function b(e,n,a,i){i=[t.id].concat(Object(u.a)(i)),r(e,n,a,i)}function f(e,n){var a=[t.id];i(t.id,e,n,a)}function p(e,n,a,r){r=[t.id].concat(Object(u.a)(r)),i(e,n,a,r)}function m(e,n,a,r){r=[t.id].concat(Object(u.a)(r)),c(e,n,a,r)}function h(e,n,a,r,i,c){c=[t.id].concat(Object(u.a)(c)),o(e,n,a,r,i,c)}function O(e,n){var a=[t.id];s(t.id,e,n,a)}function g(e,n,a,r){r=[t.id].concat(Object(u.a)(r)),s(e,n,a,r)}function C(e){O("terms",e)}function w(e){O("joins",e)}var S=function(e,n,a){return function(e,n,a,r){var i=[t.id];o(t.id,e,n,a,r,i)}("terms",e,n,a)},k={borderWidth:0===n?1:"2px 0 0 1px",marginLeft:0===n?0:8},I=n<4,_=4===n||!t.collection;return Object(A.jsxs)(v.a,{className:l.paper,style:Object(d.a)({},k),children:[Object(A.jsxs)(x.a,{container:!0,spacing:1,alignItems:"center",className:l.gridRow,style:{marginBottom:0},children:[Object(A.jsx)(x.a,{item:!0,xs:12,sm:8,children:Object(A.jsx)(z,{collection:t.collection,onChange:function(e){return j("collection",e)}})}),Object(A.jsx)(x.a,{item:!0,xs:12,sm:4,children:Object(A.jsx)(ne,{label:"Inject At",initValue:t.injectAt,onChange:function(e){return j("injectAt",e)}})})]}),Object(A.jsxs)(x.a,{container:!0,spacing:1,alignItems:"center",className:l.gridRow,children:[Object(A.jsx)(x.a,{item:!0,xs:5,children:Object(A.jsx)(ne,{label:"On Field",initValue:t.onField,onChange:function(e){return j("onField",e)}})}),Object(A.jsx)(x.a,{item:!0,xs:2,style:{textAlign:"center"},children:Object(A.jsx)(ge.a,{style:{marginTop:8}})}),Object(A.jsx)(x.a,{item:!0,xs:5,children:Object(A.jsx)(ne,{label:"To Field",initValue:t.toField,onChange:function(e){return j("toField",e)}})})]}),Object(A.jsxs)(x.a,{container:!0,spacing:1,alignItems:"center",className:l.gridRow,children:[Object(A.jsx)(x.a,{item:!0,sm:6,md:4,children:Object(A.jsx)(ve,{label:"Join Type",value:t.isOuterJoin,trueLabel:"Outer",falseLabel:"Inner",onChange:function(e){return j("isOuterJoin",e)}})}),Object(A.jsx)(x.a,{item:!0,sm:6,md:4,children:Object(A.jsx)(ve,{label:"Is List",value:t.isList,onChange:function(e){return j("isList",e)}})})]}),Object(A.jsxs)(Ie,{id:"join-conditions",headerLevel:3,headerText:"Join Conditions",defaultExtended:!0,children:[t.terms.length>0&&Object(A.jsx)(x.a,{item:!0,container:!0,xs:12,justifyContent:"flex-start",alignItems:"center",spacing:1,className:l.gridRow,children:t.terms.map((function(e){return Object(A.jsx)(re,{conditionData:e,onDataChange:S,onDelete:C},e.id)}))}),Object(A.jsx)(x.a,{item:!0,xs:12,children:Object(A.jsx)(y.a,{color:"primary",startIcon:Object(A.jsx)(N.a,{fontSize:"small"}),size:"small",onClick:function(){f("terms",Fe())},className:l.textButton,children:"New Condition"})})]}),Object(A.jsx)(Ie,{id:"field-filters",headerLevel:3,headerText:"Filter Displayed Fields",defaultExtended:!0,children:Object(A.jsxs)(x.a,{item:!0,container:!0,xs:12,justifyContent:"flex-start",alignItems:"center",spacing:0,className:l.gridRow,children:[Object(A.jsx)(x.a,{item:!0,xs:12,sm:6,md:3,className:l.inlineSelectItem,children:Object(A.jsx)(xe,{label:"Filter Type",onChange:function(e){return j("filterType",e)},optionA:"Show",optionB:"Hide",value:t.filterType,className:l.filterSelect})}),Object(A.jsx)(ee,{label:"Add Field",fields:t.filterFields,onAddField:function(e){f("filterFields",e)},onRemoveField:function(e){!function(e,n){var a=[t.id];c(t.id,e,n,a)}("filterFields",e)}})]})}),Object(A.jsxs)(x.a,{container:!0,spacing:2,alignItems:"center",justifyContent:"flex-start",className:l.footer,children:[Object(A.jsx)(x.a,{item:!0,container:!0,xs:6,alignItems:"center",justifyContent:"flex-start",children:I&&Object(A.jsx)(x.a,{item:!0,children:Object(A.jsx)(y.a,{disabled:_,color:"primary",startIcon:Object(A.jsx)(N.a,{fontSize:"small"}),size:"small",onClick:function(){f("joins",_e())},children:"Sub Join"})})}),Object(A.jsx)(x.a,{item:!0,container:!0,xs:6,spacing:2,alignItems:"center",justifyContent:"flex-end",style:{textAlign:"right"},children:Object(A.jsx)(x.a,{item:!0,md:6,children:Object(A.jsx)(y.a,{color:"default",startIcon:Object(A.jsx)(T.a,{fontSize:"small"}),size:"small",onClick:function(){a(t.id)},children:"Delete"})})})]}),t.joins.length>0&&Object(A.jsx)(x.a,{item:!0,container:!0,xs:12,justifyContent:"flex-start",alignItems:"center",spacing:1,className:l.gridRow,children:t.joins.map((function(e){return Object(A.jsx)(Te,{joinData:e,depth:n+1,onDelete:w,onInfoChange:b,onAddArrayItem:p,onRemoveArrayItem:m,onChangeArrayItemWithId:h,onRemoveArrayItemWithId:g},e.id)}))})]})}var Ae=Object(f.a)((function(e){return{gridRow:{marginTop:e.spacing(.5),marginBottom:e.spacing(1)},textButton:{marginTop:-4,marginBottom:e.spacing(1)}}}));function qe(e){var t=e.joinsData,n=e.onAddJoin,a=e.onDeleteJoin,i=e.onInfoChange,c=e.onAddArrayItem,o=e.onRemoveArrayItem,s=e.onChangeArrayItemWithId,l=e.onRemoveArrayItemWithId,u=Ae();function d(e){a(e)}function j(e,t,n,a){i(e,t,n,a)}function b(e,t,n,a){c(e,t,n,a)}function f(e,t,n,a){o(e,t,n,a)}function p(e,t,n,a,r,i){s(e,t,n,a,r,i)}function m(e,t,n,a){l(e,t,n,a)}return Object(A.jsxs)(r.a.Fragment,{children:[Object(A.jsx)(x.a,{item:!0,container:!0,xs:12,justifyContent:"flex-start",alignItems:"center",spacing:1,className:u.gridRow,children:t.map((function(e){return Object(A.jsx)(Te,{joinData:e,depth:0,onDelete:d,onInfoChange:j,onAddArrayItem:b,onRemoveArrayItem:f,onChangeArrayItemWithId:p,onRemoveArrayItemWithId:m},e.id)}))}),Object(A.jsx)(x.a,{item:!0,xs:12,children:Object(A.jsx)(y.a,{color:"primary",startIcon:Object(A.jsx)(N.a,{fontSize:"small"}),size:"small",onClick:function(){var e=_e();n(e)},className:u.textButton,children:"New Join"})})]})}var Re=n(613),De=n(614),Be=n(70),We=n(291),ze=n.n(We),Qe=n(290),Pe=n.n(Qe),Ge=function(){var e="DaybreakGamesKey",t="ColorTheme";return{saveServiceId:function(t){return localStorage.setItem(e,t)},getServiceId:function(){return localStorage.getItem(e)},removeServiceId:function(){return localStorage.removeItem(e)},saveColorTheme:function(e){return localStorage.setItem(t,e)},getColorTheme:function(){return localStorage.getItem(t)},removeColorTheme:function(){return localStorage.removeItem(t)}}}();n(194);function Je(e){var t=e.theme,n=e.onChangeTheme;var r=Object(a.useState)(!1),i=Object(b.a)(r,2),c=i[0],o=i[1];var s="dark"===t,l=s?"toggle-dark":"toggle-light";c&&(l="".concat(l," toggle-twirl"));var u=s?Object(A.jsx)(Pe.a,{className:l,onAnimationEnd:function(e){"twirl"===e.animationName&&o(!1)}}):Object(A.jsx)(ze.a,{className:l,onAnimationEnd:function(e){"twirl"===e.animationName&&o(!1)}});return Object(A.jsx)(Y.a,{"aria-label":"Toggle light/dark theme",title:"Toggle light/dark theme",onClick:function(){"dark"===t?(Ge.saveColorTheme("light"),o(!0),n("light")):(Ge.saveColorTheme("dark"),o(!0),n("dark"))},children:u})}var Me=n(292),Ve=n.n(Me),He=n(44);function Ue(){var e=Object(He.a)(),t="https://github.com/eating-coleslaw/ps2-visual-query",n=Object(a.useState)("dark"===e.palette.type),r=Object(b.a)(n,2),i=r[0],c=r[1];Object(a.useEffect)((function(){c("dark"===e.palette.type)}),[e.palette.type]);var o=i?"rgba(0, 0, 0, 0.87)":"#fff";return Object(A.jsx)(ue.a,{to:t,href:t,target:"_blank",rel:"noreferrer",children:Object(A.jsx)(Y.a,{"aria-label":"Go to GitHub repository",title:"Go to GitHub repository",children:Object(A.jsx)(Ve.a,{style:{color:o}})})})}var Ke=n(600),Ye=n(612),Xe=n(555),Ze=n(611),$e=n(297),et="queries",tt=Object($e.a)("ps2QueryDb",1,{upgrade:function(e,t){if(nt())switch(t){case 0:var n=e.createObjectStore(et,{keyPath:"id",autoIncrement:!1});n.createIndex("isFavorite","isFavorite",{unique:!1}),n.createIndex("dateLastModified","dateLastModified"),n.createIndex("name","name")}}});function nt(){return"indexedDB"in window||(console.log("This browser doesn't support IndexedDB"),!1)}function at(e){return rt.apply(this,arguments)}function rt(){return(rt=Object(j.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!==t.id){e.next=7;break}return e.next=4,it(t);case 4:return e.abrupt("return",e.sent);case 7:return e.next=9,ot(t);case 9:return e.abrupt("return",e.sent);case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),new Error("Error upsert query");case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function it(e){return ct.apply(this,arguments)}function ct(){return(ct=Object(j.a)(s.a.mark((function e(t){var n,a,r,i,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t.id){e.next=3;break}throw new Error("Query ".concat(t.id," violates primary key contraint"));case 3:return t.id=Object(Ne.a)(),n=Date.now(),t.dateCreated=n,t.dateLastModified=n,t.dateLastOpened=n,a=JSON.parse(JSON.stringify(t)),e.next=11,tt;case 11:return r=e.sent,i=r.transaction(et,"readwrite"),c=i.objectStore(et),e.next=16,c.add(a);case 16:return o=e.sent,e.next=19,i.done;case 19:return e.abrupt("return",o);case 22:e.prev=22,e.t0=e.catch(0),console.warn("Error adding query to database:",e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})))).apply(this,arguments)}function ot(e){return st.apply(this,arguments)}function st(){return(st=Object(j.a)(s.a.mark((function e(t){var n,a,r,i,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!==t.id){e.next=3;break}throw new Error("Cannot update query with a null ID");case 3:return n=Date.now(),t.dateLastModified=n,t.dateLastOpened=n,e.next=8,tt;case 8:return a=e.sent,r=a.transaction(et,"readwrite"),i=r.objectStore(et),c=JSON.parse(JSON.stringify(t)),e.next=14,i.put(c);case 14:return o=e.sent,e.next=17,r.done;case 17:return e.abrupt("return",o);case 20:e.prev=20,e.t0=e.catch(0),console.warn("Error adding query to database:",e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)}function lt(e){return ut.apply(this,arguments)}function ut(){return(ut=Object(j.a)(s.a.mark((function e(t){var n,a,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt;case 2:return n=e.sent,a=n.transaction(et,"readwrite"),r=a.objectStore(et),e.next=7,r.get(t);case 7:return i=e.sent,e.next=10,a.done;case 10:return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(e){return jt.apply(this,arguments)}function jt(){return(jt=Object(j.a)(s.a.mark((function e(t){var n,a,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt;case 2:return n=e.sent,a=n.transaction(et,"readwrite"),r=a.objectStore(et),e.next=7,r.delete(t);case 7:return i=e.sent,e.next=10,a.done;case 10:return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(){return ft.apply(this,arguments)}function ft(){return(ft=Object(j.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt;case 2:return t=e.sent,e.next=5,t.getAllFromIndex(et,"name");case 5:if(n=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pt(){return mt.apply(this,arguments)}function mt(){return(mt=Object(j.a)(s.a.mark((function e(){var t,n,a,r,i,c,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:5,o.length>1&&void 0!==o[1]?o[1]:0,e.next=4,tt;case 4:return n=e.sent,e.next=7,n.getAllFromIndex(et,"dateLastModified");case 7:if(a=e.sent){e.next=10;break}return e.abrupt("return",null);case 10:if(0!==a.length){e.next=12;break}return e.abrupt("return",[]);case 12:return r=a.length,i=r>t?r-t:0,c=r,e.abrupt("return",a.slice(i,c).sort((function(e,t){return t.dateLastModified-e.dateLastModified})));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ht=n(293),Ot=n.n(ht),gt=n(602),xt=(n(322),["open","children","onClose"]),vt=Object(f.a)((function(e){return{root:{position:"fixed",zIndex:1300,inset:0,transition:"none"},backdrop:{opacity:1,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",top:0,left:0,right:0,bottom:0,display:"flex",zIndex:-1,position:"fixed",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",height:"100vh"},paper:{top:0,flex:"1 0 auto",height:"100%",display:"flex",outline:0,zIndex:1200,position:"fixed",overflowY:"auto",flexDirection:"column",left:0,right:"auto",borderRadius:0,width:300,transform:"translateX(-300px)",transition:"transform 250ms cubic-bezier(.18,.89,.33,1) 0ms",padding:e.spacing(2)}}}));function yt(e){var t=e.open,n=e.children,r=e.onClose,i=(Object(ye.a)(e,xt),vt());return Object(a.useEffect)((function(){var e=document.querySelector("#menu-drawer-paper"),n=document.querySelector("#menu-drawer-backdrop");function a(t){t.target===t.currentTarget&&r&&(e.classList.toggle("menu-drawer-transition"),r("backdropClick"))}function i(t){"Escape"===t.key&&(t.stopPropagation(),r&&(e.classList.toggle("menu-drawer-transition"),r("escapeKeyDown")))}return t&&(e.classList.toggle("menu-drawer-transition"),document.body.style.overflowY="hidden",n.addEventListener("click",a),document.addEventListener("keydown",i)),function(){null===e||void 0===e||e.classList.toggle("menu-drawer-transition"),document.body.style.overflowY="",null===n||void 0===n||n.removeEventListener("click",a),document.removeEventListener("keydown",i)}}),[t,r]),t?Object(A.jsxs)("div",{className:i.root,children:[Object(A.jsx)("div",{id:"menu-drawer-backdrop",className:i.backdrop}),Object(A.jsx)(v.a,{id:"menu-drawer-paper",className:i.paper,style:{transform:"translateX(-300px)"},children:n})]}):null}var Ct=n(610),wt=Object(f.a)((function(e){return{root:{width:"100%"},listbox:{margin:0,padding:"8px 0",overflow:"auto",listStyle:"none",maxHeight:"40vh",border:"1px solid #414152",boxSizing:"border-box",lineHeight:1.25}}}));function St(e){var t=e.onSelectQuery,n=wt(),i=Object(a.useState)(!1),c=Object(b.a)(i,2),o=c[0],l=c[1],u=Object(a.useState)([]),f=Object(b.a)(u,2),p=f[0],m=f[1],h=o&&0===p.length;return Object(a.useEffect)((function(){var e=!0;if(h)return Object(j.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,bt();case 3:(n=t.sent)&&m([]),e&&m(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.warn("Error loading queries:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))(),function(){e=!1}}),[h]),Object(a.useEffect)((function(){o||m([])}),[o]),Object(A.jsx)(D.a,{id:"query-selector",className:n.root,open:o,onChange:function(e,n){return t(n.id)},onOpen:function(){l(!0)},onClose:function(){l(!1)},getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},options:p,loading:h,ListboxProps:{className:"".concat(n.listbox)},renderInput:function(e){return Object(A.jsx)(_.a,Object(d.a)(Object(d.a)({},e),{},{label:"Query Search",variant:"outlined",margin:"dense",InputProps:Object(d.a)(Object(d.a)({},e.InputProps),{},{endAdornment:Object(A.jsxs)(r.a.Fragment,{children:[h?Object(A.jsx)(Ct.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}})}var kt=["onLoadQuery"],It=Object(f.a)((function(e){return{header1:{margin:0,fontSize:"1.4em",fontWeight:500},menuButtonContainer:{maxWidth:20,marginRight:e.spacing(2)},button:{margin:0,padding:0},divider:{margin:"8px 0"},list:{width:"100%"},recentListItem:{padding:"0 0 0 8px"},subHeader:{color:e.palette.secondary.main,lineHeight:2,padding:"8px 0 0 0",fontSize:"0.875rem",boxSizing:"border-box",fontWeight:500,margin:"0 0 4px 0"},listSubheader:{color:e.palette.secondary.main,lineHeight:2,padding:"8px 0 0 0",marginTop:e.spacing(1)}}}));function Nt(e){var t=e.onLoadQuery,n=(Object(ye.a)(e,kt),It()),i=Object(He.a)(),c=Object(a.useState)(!1),o=Object(b.a)(c,2),l=o[0],u=o[1];Object(a.useEffect)((function(){u(nt())}),[]);var d=Object(a.useState)("dark"===i.palette.type),f=Object(b.a)(d,2),p=f[0],m=f[1];Object(a.useEffect)((function(){m("dark"===i.palette.type)}),[i.palette.type]);var h=p?"rgba(0, 0, 0, 0.87)":"#fff",O=Object(a.useState)(!1),g=Object(b.a)(O,2),v=g[0],y=g[1];function C(e){y(e)}var w=Object(a.useState)([]),S=Object(b.a)(w,2),k=S[0],I=S[1],N=Object(a.useState)(!1),_=Object(b.a)(N,2),L=_[0],F=_[1];return Object(a.useEffect)((function(){function e(){return a.apply(this,arguments)}function a(){return(a=Object(j.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pt(10);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),console.warn("Error getting recently modified queries:",e),t.abrupt("return");case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}return v&&!L&&(F(!0),e().then((function(e){if(e&&e.length>0){var a=e.map((function(e){var a=new Date(e.dateLastModified).toLocaleString(),r="Modified: ".concat(a);return Object(A.jsx)(Xe.a,{button:!0,onClick:function(){return n=e.id,t(n),void y(!1);var n},className:n.recentListItem,children:Object(A.jsx)(Ze.a,{primary:e.name,primaryTypographyProps:{variant:"body2"},secondary:r})},e.id)}));I(a)}F(!1)})),F(!1)),function(){F(!1)}}),[v,L,t,n.recentListItem]),l?Object(A.jsxs)(r.a.Fragment,{children:[Object(A.jsx)(x.a,{item:!0,xs:1,className:n.menuButtonContainer,children:Object(A.jsx)(Y.a,{type:"submit",variant:"outlined",color:"primary","aria-label":"Menu",className:n.button,onClick:function(e){("keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&C(!0)},children:Object(A.jsx)(Ot.a,{style:{color:h}})})}),Object(A.jsxs)(yt,{open:v,onClose:function(){return C(!1)},children:[Object(A.jsx)("h1",{className:n.header1,children:"PS2 Query Editor"}),Object(A.jsx)(Ye.a,{className:n.divider}),Object(A.jsx)("h2",{className:n.subHeader,children:"Open a Query"}),Object(A.jsx)(St,{onSelectQuery:function(e){t(e),y(!1)}}),Object(A.jsx)(Ke.a,{className:n.list,subheader:Object(A.jsx)(gt.a,{component:"div",id:"recent-queries-subheader",className:n.listSubheader,children:"Recent Queries"}),children:k}),Object(A.jsx)(Ye.a,{})]})]}):null}var _t=["onMenuClicked"];function Lt(e){e.onMenuClicked;var t=Object(ye.a)(e,_t);return Object(A.jsx)(Re.a,{position:"static",children:Object(A.jsx)(De.a,{variant:"dense",children:Object(A.jsxs)(x.a,{container:!0,alignItems:"center",children:[Object(A.jsxs)(x.a,{item:!0,container:!0,xs:8,sm:6,alignItems:"center",children:[Object(A.jsx)(Nt,Object(d.a)({},t)),Object(A.jsx)(x.a,{item:!0,xs:10,children:Object(A.jsx)(Be.a,{variant:"h6",children:"PS2 Query Editor"})})]}),Object(A.jsx)(x.a,{item:!0,xs:4,sm:6,container:!0,alignItems:"center",children:Object(A.jsxs)(x.a,{item:!0,container:!0,xs:12,justifyContent:"flex-end",children:[Object(A.jsx)(Ue,{}),Object(A.jsx)(Je,Object(d.a)({},t))]})})]})})})}var Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{treeField:e,groupPrefix:t,startField:n,isList:a}},Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"character",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ps2:v2";return{namespace:t,collection:e,language:"All",limit:0,conditions:[],filterType:"show",filterFields:[],resolves:[],joins:[],tree:Ft(),start:null,sortFields:[],sortDirection:-1,id:null,name:"",dateCreated:null,dateLastModified:null,dateLastOpened:null,isFavorite:!1}},Tt=Object(f.a)((function(e){return{gridRow:{marginTop:e.spacing(.5),marginBottom:e.spacing(1)}}}));function At(e){var t=e.tree,n=e.onChange,a=Tt();return Object(A.jsxs)(r.a.Fragment,{children:[Object(A.jsxs)(x.a,{container:!0,spacing:1,alignItems:"center",className:a.gridRow,children:[Object(A.jsx)(x.a,{item:!0,sm:12,md:6,children:Object(A.jsx)(ne,{label:"Tree Field",initValue:t.treeField,onChange:function(e){n("treeField",e)}})}),Object(A.jsx)(x.a,{item:!0,sm:12,md:6,children:Object(A.jsx)(ne,{label:"Start Field",initValue:t.startField,onChange:function(e){n("startField",e)}})})]}),Object(A.jsxs)(x.a,{container:!0,spacing:1,alignItems:"center",className:a.gridRow,children:[Object(A.jsx)(x.a,{item:!0,xs:12,sm:6,md:4,children:Object(A.jsx)(ve,{label:"Is List",initValue:t.isList,onChange:function(e){n("isList",e)}})}),Object(A.jsx)(x.a,{item:!0,xs:12,sm:6,md:8,children:Object(A.jsx)(ne,{label:"Group Prefix",initValue:t.groupPrefix,onChange:function(e){n("groupPrefix",e)}})})]})]})}var qt=n(296),Rt=n(615),Dt=n(294),Bt=n.n(Dt),Wt=Object(f.a)((function(e){return{paper:{border:"1px solid #414152"}}}));function zt(e){var t=e.query,n=e.isSavingEnabled,i=e.onClickSaveNew,c=e.onClickSave,o=e.onClickSaveAs,s=e.onClickNewQuery,l=e.onClickDelete,u=e.onClickRename,d=e.onClickImport,j=Wt(),f=Object(He.a)(),p=Object(a.useState)(null),m=Object(b.a)(p,2),h=m[0],O=m[1],g=Boolean(h),v=Object(a.useState)(null===t.id),C=Object(b.a)(v,2),w=C[0],S=C[1];function k(){O(null)}return Object(a.useEffect)((function(){S(null===t.id)}),[t.id]),Object(A.jsxs)(x.a,{item:!0,container:!0,xs:5,sm:5,md:5,justifyContent:"flex-end",alignItems:"center",style:{textAlign:"right"},children:[w&&n&&Object(A.jsx)(r.a.Fragment,{children:Object(A.jsx)(y.a,{onClick:function(){k(),i()},style:{color:f.palette.primary.main},children:"Save"})}),Object(A.jsxs)(r.a.Fragment,{children:[!w&&n&&Object(A.jsx)(x.a,{item:!0,children:Object(A.jsx)(y.a,{onClick:function(){return c("")},style:{color:f.palette.primary.main},children:"Save"})}),Object(A.jsxs)(x.a,{item:!0,children:[Object(A.jsx)(Y.a,{"aria-label":"More query options","aria-controls":"query-options-menu","aria-haspopup":!0,onClick:function(e){O(e.currentTarget)},children:Object(A.jsx)(Bt.a,{})}),Object(A.jsxs)(qt.a,{id:"query-options-menu",anchorEl:h,keepMounted:!0,open:g,onClose:k,classes:j,children:[n&&!w&&Object(A.jsx)(Rt.a,{onClick:function(){k(),o()},children:"Save As..."},"SaveAs"),Object(A.jsx)(Rt.a,{onClick:function(){k(),s()},children:"New"},"New"),n&&!w&&Object(A.jsx)(Rt.a,{onClick:function(){k(),u()},children:"Rename"},"Rename"),n&&!w&&Object(A.jsx)(Rt.a,{onClick:function(){k(),l()},children:"Delete"},"Delete"),Object(A.jsx)(Rt.a,{onClick:function(){k(),d()},children:"Import"},"Import")]})]})]})]})}var Qt=n(627),Pt=n(619),Gt=n(617),Jt=n(618),Mt=n(616);function Vt(e){var t=e.open,n=e.title,a=e.text,r=e.confirmLabel,i=e.onCancel,c=e.onConfirm;return Object(A.jsxs)(Qt.a,{open:t,onClose:i,maxWidth:"sm",fullWidth:!0,children:[Object(A.jsx)(Mt.a,{children:n}),Object(A.jsx)(Gt.a,{children:Object(A.jsx)(Jt.a,{children:a})}),Object(A.jsxs)(Pt.a,{children:[Object(A.jsx)(y.a,{onClick:i,color:"primary",children:"Cancel"}),Object(A.jsx)(y.a,{onClick:c,color:"primary",children:r})]})]})}function Ht(e){var t=e.open,n=e.onClose,a=e.onSubmit;return Object(A.jsx)(Vt,{open:t,title:"Delete Query",text:"Are you sure you want to delete this query? This action is permanent and cannot be undone.",confirmLabel:"Delete",onCancel:n,onConfirm:a})}function Ut(e){var t=e.open,n=e.onClose,a=e.onSubmit;return Object(A.jsx)(Vt,{open:t,title:"New Query",text:"Opening a new query will erase all unsaved changes. Are you sure you want to continue?",confirmLabel:"Open New",onCancel:n,onConfirm:a})}function Kt(e){var t=e.open,n=e.title,r=e.text,i=e.label,c=e.onClose,o=e.onSubmit,s=Object(a.useState)(""),l=Object(b.a)(s,2),u=l[0],d=l[1];function j(){return!!u}return Object(A.jsxs)(Qt.a,{open:t,onClose:c,fullWidth:!0,maxWidth:"sm",children:[Object(A.jsx)(Mt.a,{children:n}),Object(A.jsxs)(Gt.a,{children:[Object(A.jsx)(Jt.a,{children:r}),Object(A.jsx)(_.a,{autoFocus:!0,margin:"dense",label:i,type:"text",required:!0,fullWidth:!0,value:u,onChange:function(e){return d(e.target.value)}})]}),Object(A.jsxs)(Pt.a,{children:[Object(A.jsx)(y.a,{onClick:function(){c()},color:"primary",children:"Cancel"}),Object(A.jsx)(y.a,{onClick:function(){j&&(o(u),d(""))},disabled:!j(),color:"primary",children:"Save"})]})]})}function Yt(e){var t=e.open,n=e.onClose,a=e.onSubmit;return Object(A.jsx)(Kt,{open:t,title:"Rename Query",text:"Enter a new name for the query",label:"Query Name",onClose:n,onSubmit:a})}function Xt(e){var t=e.open,n=e.onClose,a=e.onSubmit;return Object(A.jsx)(Kt,{open:t,title:"Save Query As...",text:"Enter a name for the copied query.",label:"Query Name",onClose:n,onSubmit:a})}function Zt(e){var t=e.open,n=e.onClose,a=e.onSubmit;return Object(A.jsx)(Kt,{open:t,title:"Save New Query",text:"Enter a name for the new query.",label:"Query Name",onClose:n,onSubmit:a})}var $t=n(552),en=/^([a-z0-9]+(_?[a-z0-9]+)*)+(\.([a-z0-9]+_?[a-z0-9]+)+)*$/;function tn(e){return en.test(e)}function nn(e){var t=[];return e.forEach((function(e){tn(e)&&!t.includes(e)&&t.push(e)})),t}var an=["<","[",">","]","^","*","!"],rn=["^","*"];function cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||!t)return null;var a=[],r=e.split(t);return r.forEach((function(e){var t=e.split("="),r=t[0],i=t[1];if(i&&tn(r)){var c="equals",o=i.charAt(0);if(an.includes(o)){var s;if(n&&rn.includes(o))return;if(!(i=i.slice(1)))return;var l="=".concat(o);c=null===(s=B.Operators.find((function(e){return e.value===l})))||void 0===s?void 0:s.name}var u=Fe(c);u.field=r,u.value=i,a.push(u)}})),0===a.length?null:a}var on=["show","hide"];function sn(e,t){if(!on.includes(e))return null;if(!t)return null;var n=t.split(",");if(0===n.length)return null;var a=nn(n);return 0===a.length?null:{filterType:e,filterFields:a}}var ln=["type","on","to","list","show","hide","inject_at","terms","outer"];function un(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[],a=[0],r=0,i=-1,c=[],o=[],s=[],l=0,u=0;u<e.length;u++){var d=e.charAt(u);if("("===d)s[r]={open:u,close:null},r++;else if(")"===d){if(!s[--r])throw new Error("Found closing parentheses missing opening parentheses");s[r].close=u,0===r&&(o[l]=s,s=[])}else{if(","!==d)continue;if(c.push(u),0===r){var j=e.slice(i+1,u);n[l]=j,l++,a[l]=u,i=u}}}if(0===n.length)n.push(e);else{var b=e.slice(i+1);n.push(b)}var f=[];return n.forEach((function(e){var r,i=n.indexOf(e);i<o.length&&(r=o[i]);var c=e,s="";if(r&&r[0]){var l=0;i>0&&(l=a[i]+1);var u=r[0],d=u.open-l,j=u.open+1-l,b=u.close-l;c=e.slice(0,d),s=e.slice(j,b)}var p=dn(c,t);if(null!==p){if(""!==s){var m=un(s,p.id);m&&(p.joins=m)}f.push(p)}})),f.length>0?f:null}function dn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=_e(t),a=e.split("^"),r=[];return a.forEach((function(e){var t=e.split(":"),i=Object(b.a)(t,2),c=i[0],o=i[1];if(!ln.includes(c)&&0===a.indexOf(e)&&B.Collections.includes(c))return n.collection=c,void r.push("type");switch(c){case"type":!r.includes(c)&&B.Collections.includes(o)&&(n.collection=o,r.push("type"));break;case"on":!r.includes(c)&&tn(o.toLowerCase())&&(n.onField=o,r.push(c));break;case"to":!r.includes(c)&&tn(o.toLowerCase())&&(n.toField=o,r.push(c));break;case"list":!r.includes(c)&&["0","1","false","true"].includes(o)&&(n.isList="1"===o||"true"===o,r.push(c));break;case"show":if(!r.includes("hide")){var s=nn(o.split("'"));s.length>0&&(n.filterType=c,n.filterFields=[].concat(Object(u.a)(n.filterFields),Object(u.a)(s)),r.push(c))}break;case"hide":if(!r.includes("show")){var l=nn(o.split("'"));l.length>0&&(n.filterType=c,n.filterFields=[].concat(Object(u.a)(n.filterFields),Object(u.a)(l)),r.push(c))}break;case"inject_at":!r.includes(c)&&o&&(n.injectAt=o,r.push(c));break;case"terms":var d=cn(o,"'",!0);null!==d&&(n.terms=[].concat(Object(u.a)(n.terms),Object(u.a)(d)));break;case"outer":!r.includes(c)&&["0","1","false","true"].includes(o)&&(n.isOuterJoin="1"===o||"true"===o,r.push(c));break;default:return}})),n.collection?n:null}var jn=["de","en","es","fr","it"];var bn=["field","list","prefix","start"];var fn=["hide","show","resolve","limit","lang","join","tree"],pn=["case","distinct","exactMatchFirst","has","includeNull","limitPerDB","retry","sort","start","timing"];function mn(e){if(!e)throw new Error("Query URL is required");var t=unescape(e).split("?"),n=function(e){var t=e.split("/"),n=t.length-1,a=t[n],r="";""!==a?r=a.toLowerCase():n>0&&(r=t[n-1]);if(""===r)throw new Error("Collection value not specified in the URL");if(B.Collections.includes(r))return r;throw new Error("Collection value '".concat(r,"' specified in the query URL is not a valid collection."))}(t[0]),a=Et(n,"ps2:v2");if(0===t.length)return a;var r=function(e){"c"===e.charAt(0)&&":"===e.charAt(1)&&(e="&".concat(e));var t=e.split("&c:");return t.length<=1||""===t[1]?null:t}(t[1]),i=[];return r.forEach((function(e){var t=function(e){var t=[];t=e.startsWith("join=")?["join",e.slice(5)]:e.split("=");var n=t,a=Object(b.a)(n,2),r=a[0],i=a[1];if(2!==t.length)return null;if(!fn.includes(r))return pn.includes(r),null;if(""===i)return null;return t}(e);if(null!==t||0!==r.indexOf(e)){var n=t[0],c=t[1];if(!i.includes(n)||["show","hide","resolve","join"].includes(n))if("show"!==n||!i.includes("hide"))if("hide"!==n||!i.includes("show"))(function(e,t,n){var a,r=!1;switch(t){case"hide":case"show":null!==(a=sn(t,n))&&(e.filterType=a.filterType,e.filterFields=[].concat(Object(u.a)(e.filterFields),Object(u.a)(a.filterFields)),r=!0);break;case"resolve":null!==(a=function(e){if(!e)return null;var t=e.split(",");if(0===t.length)return null;var n=[];return t.forEach((function(e){tn(e)&&!n.includes(e)&&n.push(e)})),0===n.length?null:n}(n))&&(e.resolves=[].concat(Object(u.a)(e.resolves),Object(u.a)(a)),r=!0);break;case"limit":e.limit=function(e){var t=+e;return t<0?0:t>=1e4?1e4:isNaN(t)?0:t}(n),r=!0;break;case"lang":null!==(a=function(e){return jn.includes(e)?e:null}(n))&&(e.language=n,r=!0);break;case"tree":null!==(a=function(e){if(!e)return null;var t=e.split("^"),n=Ft(),a=[];return t.forEach((function(e){var t=e.split(":");if(1===t.length&&!a.includes("field")){var r=t[0];!bn.includes(r)&&tn(r)&&(n.treeField=r,a.push("field"))}var i=Object(b.a)(t,2),c=i[0],o=i[1];if(bn.includes(c)&&!a.includes(c)&&o)switch(c){case"field":tn(o)&&(n.treeField=o,a.push(c));break;case"list":0===+o?(n.isList=!1,a.push(c)):1===+o&&(n.isList=!0,a.push(c));break;case"prefix":n.groupPrefix=o,a.push(c);break;case"start":tn(o)&&(n.startField=o,a.push(c));break;default:return}})),""===n.treeField&&""===n.startField?null:n}(n))&&(e.tree=n,r=!0);break;case"join":null!==(a=un(n))&&(e.joins=[].concat(Object(u.a)(e.joins),Object(u.a)(a)),r=!0);break;default:return}return r})(a,n,c)&&i.push(n)}else{var o=cn(e,"&",!1);null!==o&&(a.conditions=o)}})),a}function hn(e){var t=e.open,n=e.onClose,r=e.onSubmit,i=Object(a.useState)(""),c=Object(b.a)(i,2),o=c[0],s=c[1];var l=Object(a.useState)(""),u=Object(b.a)(l,2),d=u[0],j=u[1];return Object(A.jsxs)(Qt.a,{open:t,onClose:n,fullWidth:!0,maxWidth:"sm",children:[Object(A.jsx)(Mt.a,{children:"Import Query URL"}),Object(A.jsxs)(Gt.a,{children:[Object(A.jsx)(Jt.a,{children:"Enter a query URL to open in the editor"}),Object(A.jsx)($t.a,{autoFocus:!0,required:!0,style:{width:"100%"},value:o,onChange:function(e){s(e.target.value),j("")}}),d&&Object(A.jsx)(Be.a,{color:"error",variant:"body2",style:{width:"100%"},children:d})]}),Object(A.jsxs)(Pt.a,{children:[Object(A.jsx)(y.a,{onClick:function(){n()},color:"primary",children:"Cancel"}),Object(A.jsx)(y.a,{onClick:function(){try{var e=mn(o);e?(j(""),s(""),r(e)):j("Query URL could not be parsed")}catch(t){j("Error parsing query URL: ".concat(t))}},disabled:!(o&&!d),color:"primary",children:"Import"})]})]})}function On(e){var t=e.query,n=e.isSavingEnabled,i=e.onSaveNew,c=e.onSave,o=e.onSaveAs,s=e.onNewQuery,l=e.onDelete,u=e.onRename,d=e.onImport,j=Object(a.useState)(""),f=Object(b.a)(j,2),p=f[0],m=f[1];function h(){m("")}function O(e){p||m(e)}return Object(A.jsxs)(r.a.Fragment,{children:[Object(A.jsx)(zt,{query:t,isSavingEnabled:n,onClickSaveNew:function(){return O("SaveNew")},onClickSave:function(){return c()},onClickSaveAs:function(){return O("SaveAs")},onClickNewQuery:function(){return O("OpenNew")},onClickDelete:function(){return O("Delete")},onClickRename:function(){return O("Rename")},onClickImport:function(){return O("Import")}}),Object(A.jsx)(Zt,{open:"SaveNew"===p,onClose:h,onSubmit:function(e){h(),i(e)}}),Object(A.jsx)(Xt,{open:"SaveAs"===p,onClose:h,onSubmit:function(e){h(),o(e)}}),Object(A.jsx)(Ut,{open:"OpenNew"===p,onClose:h,onSubmit:function(){h(),s()}}),Object(A.jsx)(Ht,{open:"Delete"===p,onClose:h,onSubmit:function(){h(),l(t.id)}}),Object(A.jsx)(Yt,{open:"Rename"===p,onClose:h,onSubmit:function(e){h(),u(e)}}),Object(A.jsx)(hn,{open:"Import"===p,onClose:h,onSubmit:function(e){h(),d(e)}})]})}var gn=Object(f.a)((function(e){return{header:{margin:0,fontSize:"1.4em",fontWeight:500},subHeader:{margin:0,fontSize:"1.05em",fontWeight:400,color:e.palette.secondary.main,lineHeight:"1.1",marginTop:e.spacing(.5)}}}));function xn(e){var t=e.queryName,n=gn(),a=t||"Query Creator";return Object(A.jsxs)(x.a,{item:!0,container:!0,xs:7,sm:7,md:7,justifyContent:"flex-start",children:[""===t&&Object(A.jsx)("h1",{className:n.header,title:"Query Creator",children:"Query Creator"}),!!t&&Object(A.jsxs)("div",{children:[Object(A.jsx)("h1",{className:n.header,title:"Query Creator",children:"Query Creator"}),Object(A.jsx)("h2",{className:n.subHeader,title:a,children:a})]})]})}var vn=n(195).Query,yn=n(195),Cn=Object(f.a)((function(e){return{root:{flexGrow:1},container:{"margin-top":e.spacing(2)},gridContainer:{padding:e.spacing(2)},gridContainerItem:{"padding-bottom":e.spacing(2)},paper:{padding:e.spacing(2)},gridRow:{marginTop:e.spacing(.5),marginBottom:e.spacing(1)},header1:{margin:0,fontSize:"1.4em",fontWeight:500},header2:{margin:0,fontSize:"1.2em",fontWeight:500,width:"100%",marginTop:e.spacing(1.5)},itemParagraph:{marginTop:e.spacing(1),marginBottom:e.spacing(2)},splitQueryField:{width:250},filterSelect:{width:120},inlineSelectItem:{marginTop:4},textButton:{marginTop:-4,marginBottom:e.spacing(1)},buttonWrapper:{margin:e.spacing(1),position:"relative",display:"flex",justifyContent:"flex-start"},buttonProgress:{color:"black",position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));function wn(){var e=Cn(),t="ps2:v2";yn.SetGlobalNamespace(t);var n=Object(a.useState)(Ge.getServiceId()),i=Object(b.a)(n,2),c=i[0],o=i[1];Object(a.useEffect)((function(){var e=Ge.getServiceId();null!==e&&(yn.SetGlobalServiceKey(e),o(e))}),[]);var f=Object(a.useState)(Et("character",t)),I=Object(b.a)(f,2),_=I[0],L=I[1],F=Object(h.a)("(prefers-color-scheme: dark)"),E=Ge.getColorTheme(),T=Object(a.useState)(E||(F?"dark":"light")),q=Object(b.a)(T,2),D=q[0],B=q[1];Object(a.useEffect)((function(){B(E||(F?"dark":"light"))}),[E,F]);var W="dark"===D,Q=r.a.useMemo((function(){return Object(p.a)({palette:{type:W?"dark":"light",primary:W?{main:"#E7ADFB"}:k.a,secondary:W?{main:"#F8C275"}:{main:"#5700FE"},background:{paper:W?"#27273A":"#fff",default:W?"#0F1320":"#fafafa"},text:{}},contrastThreshold:5})}),[W]);var P=Object(a.useState)(),G=Object(b.a)(P,2),J=G[0],V=G[1],U=Object(a.useState)(!1),K=Object(b.a)(U,2),Y=K[0],X=K[1];function Z(){return(Z=Object(j.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.warn("Invalid query name"),e.abrupt("return");case 3:return e.next=5,$(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){return te.apply(this,arguments)}function te(){return(te=Object(j.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(d.a)({},_),t&&(n.name=t),e.prev=2,e.next=5,at(n);case 5:return a=n.id,e.next=8,ae(a);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.warn("Error saving query:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function ne(){return(ne=Object(j.a)(s.a.mark((function e(){var t,n,a,r=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.prev=1,n=Object(d.a)({},_),t||(t="".concat(n.name," (copy)")),n.id=null,n.name=t,e.next=8,at(n);case 8:(a=e.sent)?(L((function(e){return Object(d.a)(Object(d.a)({},e),n)})),V(n.id)):console.warn("Error saving query:",a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.warn("Error saving query:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function ae(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(j.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lt(t);case 3:(n=e.sent)&&(L(n),V(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn("Error loading query ".concat(t,":"),e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ce(){return(ce=Object(j.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return(oe=Object(j.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dt(t);case 3:se(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn("Error deleting query ".concat(t,":"),e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function se(){L(Et())}function ue(e,t){L((function(n){var a=Object(u.a)(n[e]);if(""===t||a.includes(t))return n;var r=a;return r.push(t),Object(d.a)(Object(d.a)({},n),Object(l.a)({},e,r))}))}function de(e,t){L((function(n){var a=Object(u.a)(n[e]),r=a.indexOf(t);if(-1!==r){var i=a;return i.splice(r,1),Object(d.a)(Object(d.a)({},n),Object(l.a)({},e,i))}}))}function je(e,t,n){L((function(a){var r=a.conditions.map((function(a){return a.id===e?Object(d.a)(Object(d.a)({},a),Object(l.a)({},t,n)):a}));return Object(d.a)(Object(d.a)({},a),{conditions:r})}))}function be(e){L((function(t){var n=t.conditions.filter((function(t){return t.id!==e}));return Object(d.a)(Object(d.a)({},t),{conditions:n})}))}function fe(e,t,n,a,r,i){var c=r[0],o=Object(u.a)(r);return o.splice(0,1),e.map((function(e){return e.id===c?pe(e,t,n,a,o,i):e}))}function pe(e,t,n,a,r,i){if(e.id===t)return i(e);var c=r[0],o=Object(u.a)(r);o.splice(0,1);var s=e.joins.map((function(e){return e.id===c?pe(e,t,n,a,o,i):e}));return e=Object(d.a)(Object(d.a)({},e),{joins:s})}Object(a.useEffect)((function(){X(nt())}),[]);var me=Object(a.useState)(""),Oe=Object(b.a)(me,2),ge=Oe[0],xe=Oe[1];Object(a.useEffect)((function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n.length>0&&n.forEach((function(n){if(n.collection){var r=null!==a?a.joinService(n.collection):t.joinService(n.collection);r.isList(n.isList),r.isOuterJoin(n.isOuterJoin),n.injectAt&&r.injectAt(n.injectAt),n.onField&&r.onField(n.onField),n.toField&&r.toField(n.toField),n.filterFields.length>0&&r["".concat(n.filterType,"Fields")](n.filterFields),n.terms.length>0&&n.terms.forEach((function(e){var t=e.field,n=e.operator,a=e.value;t&&n&&a&&r.where(t)[n.name](a)})),n.joins.length>0&&e(t,n.joins,r)}})),t}try{var t=function(){var t=new vn(_.collection,_.namespace);return _.language&&"All"!==_.language&&t.setLanguage(_.language.toLowerCase()),null!==_.limit&&0!==_.limit&&t.setLimit(_.limit),null!==_.start&&t.setStart(_.start),_.filterFields.length>0&&t["".concat(_.filterType,"Fields")](_.filterFields),_.resolves.length>0&&t.resolve(_.resolves),_.sortFields.length>0&&t.sort(_.sortFields),_.conditions.length>0&&_.conditions.forEach((function(e){var n=e.field,a=e.operator,r=e.value;n&&a&&r&&t.where(n)[a.name](r)})),_.joins.length>0&&(t=e(t,_.joins)),t}().toUrl();t=t.replace("http://","https://");var n=function(){var e=_.tree.treeField||_.tree.startField;if(e){var t="&c:tree=field:".concat(e);return t="".concat(t,"^isList:").concat(_.tree.isList),_.tree.groupPrefix&&(t="".concat(t,"^prefix:").concat(_.tree.groupPrefix)),_.tree.startField&&(t="".concat(t,"^start:").concat(_.tree.startField)),t}}();n&&(t+=n),xe(t)}catch(a){console.log("Error getting query URL: ",a)}}),[_,J]);var ve=Object(a.useState)(!1),ye=Object(b.a)(ve,2),Ce=ye[0],we=ye[1],Se=Object(a.useState)(""),ke=Object(b.a)(Se,2),Ne=ke[0],_e=ke[1];function Le(){return(Le=Object(j.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ge||Ce){e.next=18;break}return we(!0),e.prev=2,e.next=5,fetch(ge);case 5:return t=e.sent,e.next=8,t.json();case 8:n=e.sent,_e(n),we(!1),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),console.log("Error getting data from query: ",e.t0),_e("Error getting data from query: ".concat(e.t0)),we(!1);case 18:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}return Object(A.jsxs)(m.a,{theme:Q,children:[Object(A.jsx)(O.a,{}),Object(A.jsx)(Lt,{theme:D,onChangeTheme:function(e){Ge.saveColorTheme(e),B(e)},onLoadQuery:ae}),Object(A.jsx)(g.a,{maxWidth:"lg",className:e.container,children:Object(A.jsxs)(x.a,{container:!0,alignItems:"flex-start",children:[Object(A.jsxs)(x.a,{container:!0,item:!0,xs:12,sm:6,md:6,className:e.gridContainer,children:[Object(A.jsx)(x.a,{item:!0,xs:12,className:e.gridContainerItem,children:Object(A.jsx)(v.a,{className:e.paper,children:Object(A.jsxs)(Ie,{id:"service-id",headerLevel:1,headerText:"Service ID",defaultExtended:!c||"example"===c,children:[Object(A.jsxs)("p",{className:e.itemParagraph,children:["Sign up for a service ID"," ",Object(A.jsx)("a",{href:"https://census.daybreakgames.com/#service-id","aria-label":"Service ID sign up page",target:"_blank",rel:"noreferrer",style:{color:"#40afee"},children:"here"}),". The 'example' service ID allows up to 10 requests per minute. Saving your service ID will store it to this browser."]}),Object(A.jsx)(R,{serviceId:_.serviceKey,onServiceKeyChange:function(e){yn.SetGlobalServiceKey(e),Ge.saveServiceId(e)},onDeleteStoredKey:function(){L((function(e){return Object(d.a)(Object(d.a)({},e),{serviceKey:"example"})})),yn.SetGlobalServiceKey("example"),Ge.removeServiceId()}})]})})}),Object(A.jsx)(x.a,{item:!0,xs:12,className:e.gridContainerItem,children:Object(A.jsxs)(v.a,{className:e.paper,children:[Object(A.jsxs)(x.a,{container:!0,className:e.gridRow,alignItems:"flex-start",spacing:1,style:{marginBottom:12},children:[Object(A.jsx)(xn,{queryName:_.name}),Object(A.jsx)(On,{query:_,isSavingEnabled:Y,onSaveNew:function(e){return Z.apply(this,arguments)},onSave:$,onSaveAs:function(){return ne.apply(this,arguments)},onNewQuery:se,onDelete:function(e){return oe.apply(this,arguments)},onRename:function(e){return ce.apply(this,arguments)},onImport:function(e){L(e)}})]}),Object(A.jsxs)("p",{className:e.itemParagraph,children:["Refer to the"," ",Object(A.jsx)("a",{href:"https://census.daybreakgames.com/#general","aria-label":"Official census API documentation page",target:"_blank",rel:"noreferrer",style:{color:"#40afee"},children:"official documentation"})," ","or"," ",Object(A.jsx)("a",{href:"https://github.com/leonhard-s/auraxium/wiki/Census-API-Primer","aria-label":"Leonhard-s's Census API Primer wiki",target:"_blank",rel:"noreferrer",style:{color:"#40afee"},children:"leonhard-s's API primer"})," ","for more information on using the API."]}),Object(A.jsx)(Ie,{id:"collection",headerLevel:2,headerText:"Collection",defaultExtended:!0,children:Object(A.jsxs)(x.a,{container:!0,spacing:1,alignItems:"center",className:e.gridRow,children:[Object(A.jsx)(x.a,{item:!0,sm:12,md:7,className:e.splitQueryField,children:Object(A.jsx)(z,{collection:_.collection,onChange:function(e){L((function(t){return Object(d.a)(Object(d.a)({},t),{collection:e})}))}})}),Object(A.jsx)(x.a,{item:!0,sm:12,md:4,className:e.splitQueryField,style:{marginTop:4},children:Object(A.jsx)(H,{language:_.language,onChange:function(e){L((function(t){return Object(d.a)(Object(d.a)({},t),{language:e})}))}})}),Object(A.jsx)(x.a,{item:!0,sm:12,style:{marginLeft:16,marginTop:8},children:Object(A.jsx)(M,{value:_.limit,onChange:function(e){var t=0===e?null:e;L((function(e){return Object(d.a)(Object(d.a)({},e),{limit:t})}))},label:"Limit"})})]})}),Object(A.jsxs)(Ie,{id:"search-conditions",headerLevel:2,headerText:"Search Conditions",defaultExtended:!0,children:[_.conditions.length>0&&Object(A.jsx)(x.a,{item:!0,container:!0,xs:12,justifyContent:"flex-start",alignItems:"center",spacing:1,className:e.gridRow,children:_.conditions.map((function(e){return Object(A.jsx)(re,{conditionData:e,onDataChange:je,onDelete:be},e.id)}))}),Object(A.jsx)(x.a,{item:!0,xs:12,children:Object(A.jsx)(y.a,{color:"primary",startIcon:Object(A.jsx)(N.a,{fontSize:"small"}),size:"small",onClick:function(){var e=Fe();L((function(t){var n=[].concat(Object(u.a)(t.conditions),[e]);return Object(d.a)(Object(d.a)({},t),{conditions:n})}))},className:e.textButton,children:"New Condition"})})]}),Object(A.jsx)(Ie,{id:"field-filters",headerLevel:2,headerText:"Filter Displayed Fields",defaultExtended:!0,children:Object(A.jsxs)(x.a,{item:!0,container:!0,xs:12,justifyContent:"flex-start",alignItems:"center",spacing:1,className:e.gridRow,children:[Object(A.jsx)(x.a,{item:!0,xs:12,sm:6,md:4,lg:3,className:e.inlineSelectItem,children:Object(A.jsxs)(C.a,{variant:"outlined",children:[Object(A.jsx)(w.a,{htmlFor:"filter-type-select",children:"Filter Type"}),Object(A.jsxs)(S.a,{native:!0,margin:"dense",label:"Filter Type",className:e.filterSelect,value:_.filterType,onChange:function(e){var t=e.target.value.toLowerCase();L((function(e){return Object(d.a)(Object(d.a)({},e),{filterType:t})}))},inputProps:{name:"filter-type",id:"filter-type-select"},children:[Object(A.jsx)("option",{"aria-label":"Show",value:"show",children:"Show"}),Object(A.jsx)("option",{"aira-label":"Hide",value:"hide",children:"Hide"})]})]})}),Object(A.jsx)(ee,{label:"Add Field",fields:_.filterFields,onAddField:function(e){return ue("filterFields",e)},onRemoveField:function(e){return de("filterFields",e)}})]})}),Object(A.jsx)(Ie,{id:"resolves-container",headerLevel:2,headerText:"Resolves",defaultExtended:!0,children:Object(A.jsx)(x.a,{item:!0,container:!0,xs:12,justifyContent:"flex-start",alignItems:"center",spacing:0,className:e.gridRow,children:Object(A.jsx)(ee,{label:"Resolves",fields:_.resolves,onAddField:function(e){return ue("resolves",e)},onRemoveField:function(e){return de("resolves",e)}})})}),Object(A.jsx)(Ie,{id:"joins-container",headerLevel:2,headerText:"Joins",defaultExtended:!0,children:Object(A.jsx)(qe,{joinsData:_.joins,onAddJoin:function(e){L((function(t){var n=[].concat(Object(u.a)(t.joins),[e]);return Object(d.a)(Object(d.a)({},t),{joins:n})}))},onDeleteJoin:function(e){L((function(t){var n=t.joins.filter((function(t){return t.id!==e}));return Object(d.a)(Object(d.a)({},t),{joins:n})}))},onInfoChange:function(e,t,n,a){L((function(r){var i=fe(r.joins,e,t,n,a,(function(e){return function(e,t,n){return Object(d.a)(Object(d.a)({},e),Object(l.a)({},t,n))}(e,t,n)}));return Object(d.a)(Object(d.a)({},r),{joins:i})}))},onAddArrayItem:function(e,t,n,a){L((function(r){var i=fe(r.joins,e,t,n,a,(function(e){return function(e,t,n){var a=[].concat(Object(u.a)(e[t]),[n]);return Object(d.a)(Object(d.a)({},e),Object(l.a)({},t,a))}(e,t,n)}));return Object(d.a)(Object(d.a)({},r),{joins:i})}))},onRemoveArrayItem:function(e,t,n,a){L((function(r){var i=fe(r.joins,e,t,n,a,(function(e){return function(e,t,n){var a=e[t].filter((function(e){return e!==n}));return Object(d.a)(Object(d.a)({},e),Object(l.a)({},t,a))}(e,t,n)}));return Object(d.a)(Object(d.a)({},r),{joins:i})}))},onChangeArrayItemWithId:function(e,t,n,a,r,i){L((function(c){var o=fe(c.joins,e,a,r,i,(function(e){return function(e,t,n,a,r){var i=e[t].map((function(e){return e.id===n?Object(d.a)(Object(d.a)({},e),Object(l.a)({},a,r)):e}));return Object(d.a)(Object(d.a)({},e),Object(l.a)({},t,i))}(e,t,n,a,r)}));return Object(d.a)(Object(d.a)({},c),{joins:o})}))},onRemoveArrayItemWithId:function(e,t,n,a){L((function(r){var i=fe(r.joins,e,t,n,a,(function(e){return function(e,t,n){var a=e[t].filter((function(e){return e.id!==n}));return Object(d.a)(Object(d.a)({},e),Object(l.a)({},t,a))}(e,t,n)}));return Object(d.a)(Object(d.a)({},r),{joins:i})}))}})}),Object(A.jsx)(Ie,{id:"tree-form",headerLevel:2,headerText:"Tree View",defaultExtended:!0,children:Object(A.jsx)(At,{tree:_.tree,onChange:function(e,t){L((function(n){var a=Object(d.a)(Object(d.a)({},n.tree),Object(l.a)({},e,t));return Object(d.a)(Object(d.a)({},n),{tree:a})}))}})})]})})]}),Object(A.jsxs)(x.a,{container:!0,item:!0,xs:12,sm:6,md:6,className:e.gridContainer,children:[Object(A.jsx)(x.a,{item:!0,xs:12,className:e.gridContainerItem,children:Object(A.jsx)(he,{queryUrl:ge,isLoading:Ce,onRunQuery:function(){return Le.apply(this,arguments)}})}),Object(A.jsx)(x.a,{item:!0,xs:12,className:e.gridContainerItem,children:Object(A.jsx)(le,{data:Ne,isLoading:Ce})})]})]})})]})}c.a.render(Object(A.jsx)(r.a.StrictMode,{children:Object(A.jsx)(wn,{})}),document.getElementById("root"))}},[[551,1,2]]]);
//# sourceMappingURL=main.7f908437.chunk.js.map